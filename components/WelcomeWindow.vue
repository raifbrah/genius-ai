<template>
  <div v-if="visibility" class="blur-bg">
    <div class="welcome-window">
      <div v-if="page === 1" class="welcome-window__text">
        <h3>–ü—Ä–∏–≤–µ—Ç, –¥–æ—Ä–æ–≥–æ–π –¥—Ä—É–≥!üëã</h3>
        <p>
          –ú–µ–Ω—è –∑–æ–≤—É—Ç
          <a href="https://www.instagram.com/raifbrah/" target="_blank">–†–∞–∏—Ñ</a
          >, —è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
        </p>
        <p>–Ø —Å–¥–µ–ª–∞–ª –µ–≥–æ –¥–ª—è —Ç–µ–±—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–º.</p>
        <p>
          –ù–æ –µ—Å–ª–∏ —Ç—ã –∑–∞—Ö–æ—á–µ—à—å –ø–æ–±–ª–∞–≥–æ–¥–∞—Ä–∏—Ç—å –º–µ–Ω—è –∑–∞ —Å—Ç–∞—Ä–∞–Ω–∏—è, –≤
          <a href="/settings" target="_blank">–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö</a>
          –µ—Å—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª —Å –¥–æ–Ω–∞—Ç–∞–º–∏ :)
        </p>
      </div>

      <div v-if="page === 2" class="welcome-window__text">
        <h3>API –∫–ª—é—á üîë</h3>
        <p>
          API –∫–ª—é—á –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –Ω–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–∏—Ç—å—Å—è
          —Å–≤—è–∑–∞—Ç—å—Å—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∞—à–µ–≥–æ –∑–∞–ø—Ä–æ—Å–∞.
        </p>
        <div>
          –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è API –∫–ª—é—á–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
          <ol>
            <li>
              –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å
              <a
                href="https://sore-moat-1fb.notion.site/ef0acb6113164e8b814c11cde89a782d"
                target="_blank"
                >–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é API –∫–ª—é—á–∞</a
              >
            </li>
            <li>
              –ü–µ—Ä–µ–π—Ç–∏ –ø–æ
              <a
                href="https://platform.openai.com/account/api-keys"
                target="_blank"
                >–¥–∞–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ</a
              >
              <p>
                ‚ùó –ï—Å–ª–∏ –≤—ã –Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏, –ø–æ —Å—Å—ã–ª–∫–µ –Ω—É–∂–Ω–æ
                –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å —Å–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–º VPN.
              </p>
            </li>
            <li>–ù–∞–∂–∞—Ç—å "Create new secret key"</li>
            <li>–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –∏ –≤—Å—Ç–∞–≤–∏—Ç—å –µ–≥–æ –Ω–∏–∂–µüëá</li>
          </ol>
        </div>
        <ApiKeyInput class="api-key-input-component" />
        <p>
          P.S. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –±–µ–∑ VPN, –µ–≥–æ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å —Ç–æ–ª—å–∫–æ
          –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á.
        </p>
      </div>

      <div class="welcome-window__buttons">
        <TheButton v-if="page > 1" @click="previousPage()" title="–ù–∞–∑–∞–¥" />
        <TheButton
          v-if="page < 2"
          @click="nextPage()"
          title="–î–∞–ª—å—à–µ"
          class="welcome-window__button_right"
        />
        <TheButton
          @click="close"
          v-if="page === 2"
          title="–ì–æ—Ç–æ–≤–æ"
          class="welcome-window__button_right"
        />
      </div>
    </div>
  </div>
</template>

<script>
export default {
  data() {
    return {
      page: 1,
      visibility: false,
    };
  },
  mounted() {
    if (localStorage.getItem("WelcomePage_pageNumber")) {
      this.page = JSON.parse(localStorage.getItem("WelcomePage_pageNumber"));
    }

    if (
      localStorage.getItem("apiKey") &&
      localStorage.getItem("apiKey").trim() !== ""
    ) {
      this.visibility = false;
    } else {
      this.visibility = true;
    }
  },
  methods: {
    close() {
      this.visibility = false;
    },
    nextPage() {
      this.page++;
      localStorage.setItem("WelcomePage_pageNumber", this.page);
    },
    previousPage() {
      this.page--;
      localStorage.setItem("WelcomePage_pageNumber", this.page);
    },
  },
};
</script>

<style scoped>
p {
  margin: 10px 0px;
}
.welcome-window {
  gap: 20px;
  display: flex;
  justify-content: space-between;
  flex-direction: column;

  max-width: min(calc(100vw - 40px), 550px);
  max-height: calc(100vh - 40px);
  min-height: 250px;
  overflow-y: auto;
  background: var(--color_bg);
  padding: 20px;
  border-radius: 20px;

  box-shadow: 0px 2px 20px var(--color_popupWindowShadow);
  border: var(--ui_popupWindowBorder);
}
.welcome-window__buttons {
  gap: 5px;
  display: flex;
  justify-content: space-between;
}
.welcome-window__button_right {
  margin-left: auto;
}

.welcome-window__text ul,
.welcome-window__text ol {
  display: flex;
  flex-direction: column;
  gap: 5px;
  padding-left: 2rem;
  margin: 1em 0px;
}
.welcome-window__text ul {
  list-style: disc;
}

.api-key-input-component {
  margin: 20px 0px;
}
</style>
